# Python Project Template
This template provides a basic structure for python projects.

It uses:
- [Poetry](https://python-poetry.org/docs/#installing-with-the-official-installer) as package manager
- [Pre-commit](https://pre-commit.com/) as CI pipeline for code formatting and linting
- [Docker](https://docs.docker.com/desktop/) for containerization

> [!NOTE]
> Use this template via `git clone https://github.com/oliverstoll/python-template` to avoid the *"generated by"* note on GitHub

# How to install the Project

## Dependencies 
- `make` (installable via `choco install make` on Windows)
- `Poetry` (PATH needs to be set)
- `Docker` (Installed and running)

## Installation

```bash
make init-project  # creates a .venv if not existing, installs modules and initializes pre-commit CI
```

### Hide unnecessary files (*PyCharm*)
*Settings -> Editor -> File Types -> Ignore files and folders*
- poetry.lock
- .mypy_cache
- .pytest_cache
- .ruff_cache

### Create new Readme
When set up, you should create a new Readme File that describes the project and its usage.


# How to use the Project

## Install packages
```bash
poetry add [package-name]
```

## Deploy to GCloud Run
- Set the `GCLOUD_PROJECT_ID`, `GCLOUD_REPO` and `SERVICE_NAMES` variables in the `.env` file.
- Set the `GCLOUD_RUN_SERVICES` for all Dockerfiles you defined (default is _main_) 
- check you installed all dependencies using `poetry add` and not `pip install`

```bash
# build, push and deploy all services
make build-push-deploy
```

```bash
# build all services
make build
```

```bash
# push all services
make push
```
```bash
# push all services
make push
```

- A specific service can be chosen via: 
```bash
make [operation] SERVICES=[service] # (default: main)
```
